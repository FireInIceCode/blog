---
title: APIO
subtitle: 大C也是A
layout: post
show: true
top: false
tags: 
- 日志
---

# APIO2024

## Day1-概率论

### AGC060C

考虑拿出最左边和最右边两条链共$2(n-1)$个点,归并它们,然后以钦定顺序得到一棵新树(合并成一条链),于是设$f_{i,j}$为左边链到第$i$个右边到第$j$个答案,看起来贡献计算简单.

复杂度$n^2$.

### CF1096E Pro

数据范围都是$10^7$

首先原问题你直接就会了,枚举最大值个数和最大值的值然后上一个二项式反演.

但是重点是怎么处理从最大值中等概率选一个这件事,设最大值位置随机选一个选到$1$,问题相当于算$\dfrac{P(x=1,a_1\ge r,sum_i a_i=s)}{P(a_1\ge r,sum_i=s)}=\dfrac{P(x=1,\max a_i\ge r,sum_i a_i=s)}{P(a_1\ge r,sum_i=s)}$,发现此时分子对每个元素是等价的,于是直接分子等于$\dfrac{1}{p}P(\max a_i\ge r,\sum_i a_i=s)$,剩下部分简单线性.

### ARC150D

考虑每个点被选的次数之和,先认为是从所有点中选且跳过不合法的,那么对于一个点$u$,从根到$u$上这$d$个点每个点概率相等,所以对于任意时刻这$d$个点被选的期望次数相等,于是只要求总次数,然后设前$i$个已经被选过(剩下的可能选过),于是选到下一个的概率是$\dfrac{1}{d-i}$

### ABC270Ex

操作可以转化成,$T$时给一个位置$i$打一个时间标记$e_i=T$,要求$T-e_i\ge a_i$时可以结束.则对于长度为考虑一个位置可以结束的限制就是$\forall i$,$(T-a_i,T]$不能选$i$.

考虑设答案PGF是$F(x)=\sum_i p_ix^i$,但问题是一个前缀$1\ldots i$有若干可能成为结束的前缀,所以容斥,答案是$\sum_{S,a_n\le s_1<s_2\ldots <s_n} (-1)^{S} \prod_i g_{s_i-s_{i-1}}$(看上一段的限制,发现一段的答案只和长度相关,且长度大于$a_n$时都和$a_n$一样).

于是写GF就好了,{todo},注意只要算$F(1)$,则只要算$g_{a_n}$和$Q(1)$,$Q(x)=\sum_i x^i g_i$.这两部分是平凡的.

但是这题有直接dp的做法啊!发现对于任意状态,答案只和$s=\max a_i-b_i$有关,然后调下顺序发现dp式子是线性递推就做完了.

### ARC113F

考虑把概率拆分成$f(m)$表示最小值大于等于$m$的概率,则对$f$积分就是期望.

考虑求$f$,要求任意两个间距大于$m$的概率,相当于$a_i-mi$递增的概率,于是转化成有若干个区间,每个变量在区间内均匀随机,要求递增的概率,则设二元函数$g_i(m,x)$,表示前$i$个,最后一个数值为$x$的概率,然后这个是关于$m$有$n^2$段,关于$x$有$n$段的函数,看起来可以直接维护!

### QOj6413

todo

### 寻找图的包含至少一半边的二分子图

随机黑白染色.todo

## Day1-组合计数

### LOJ177 生成子群计数

考虑$a_1=x$,那么只考虑这个可以对每个置换$p$让$i\to p_i$连无向边(复合若干次一定能得到$p^{-1}$所以有反向边),于是一种复合方案对应一个$1\to x$的路径,而任意拿出图一个生成树,$1\to x$路径一定可以拆分成一个树上路径和一个经过$1$的可能非简单圈(可能重复走边),而对于一条非树边可以唯一确定一个简单环,发现这些圈又可以由简单环生成,把每个环依次复合应该可以得到一个首位是$1$的排列,而就要求这些排列任意复合的结果数,于是问题到了$n-1$规模.

但是直接做的话$m$上升很快,有结论:$n$阶置换群最多取$n$个排列使得不能各自复合出,于是只保留$n$个即可.

方法1todo

一个智慧法说的是随机$n$种对当前$k$个排列的复合方式,把它们作为生成元做下去就是对的.

### CF1909I

对每个$m$分别做.

对$k=n-1$的情况,考虑把所有数按$\min(i,m-i)$排序,则有任意两个数和大于$m$只取决于前面那个数的位置,这个条件让你想到插入连续段的方式dp排列,于是从小到大扫值,一开始有$t=1$空,插入大于$m$的数时$T$每次加$1$,然后空交替减$1$加$1$,而方案数就是过程中$t$的乘积.

对$k\ne n-1$的时候,二项式反演,钦定有$i$个位置满足条件,则剩下$n-i$满足条件,相当于最后插入出$t$个连续段不需要合并.然后需要再次容斥避免空段

todo

### CF1896H

用多项式刻画$f$,设$A(x)=\sum_{i=0}^{2^{n+1}-1} a_ix^i$,$B(x)=\sum_{i=0}^{2^{n+1}-1} b_{2^{n+1}-1-i} x^i$,$I(x)=\sum_{i=0}^{2^{n+1}-1} x^i$,则$(a,b)$为好的当且仅当$A(I-B)+B(I-A)=2^nI$,即$AB=2^{n-1}I$.注意到右边DFT后为全$0$,则左边DFT后为全$0$.

喵的啥?todo

### CF1774G

容斥,钦定$k$个关键点未被覆盖,则一个区间包含至少一个关键点则不可选,而若存在一个区间不包含关键点则这个区间变一下会更改区间数奇偶性,对答案贡献$0$,所以变成要求每个区间包含至少一个关键点,贡献$(-1)^{k}$

剩下的部分dp+倍增todo

### CF1889E

考虑限制是,若$T_1$上$e_1=(u,v)$,若$e_1$选则所有$T_2$上的边$e_2$满足$u\
to v$经过$e_2$也要被选.

于是建立新图...

todo

### Qoj8049

