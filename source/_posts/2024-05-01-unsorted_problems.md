---
title: 杂题
subtitle: 
layout: post
show: true
top: false
tags: 
- 日志
---

### CF1608F MEX counting

显然dp, 但mex显然不能记下来, 考虑把方案数拖到后面算上, dp设 $f_{i, j, k}$ 表示填完前 $i$ 个, 当前 $\mathrm{mex}(a_1\ldots a_n)=j$, 已经填过 $k$ 种不同的大于 $j$ 的值即可.

状态数显然是 $n^2k$, 瓶颈在填入 $j$(即更新 $\mathrm{mex}$ 时)需要枚举新的 $j$ 并计算贡献, 然后这个东西上个前缀和优化就转移 $O(1)$ 了.

### P3352 [ZJOI2016] 线段树 

容易想到拆成 $v=\sum_i [v>i]$, 此时相当于 $01$ 序列, 容易发现当前的 $0$ 的答案只和两边最近的 $1$ 相关, 于是设 $f_{i, l, r, v}$ 表示进行 $i$ 次操作, 当前考虑某个值是否 $>v$, 使得左边/右边最近的 $1$ 分别在 $l-1, r+1$ 的位置的方案数, 容易做到 $n^4$.