---
title: 随机化
subtitle: 玄学之最
layout: post
show: false
istop: false
tags: 
- 日志
- random
- 杂题
- 咕咕
---

## [sdfzoj contest #1]记录

> 构造一个有向图满足其以1为根的内向生成树个数对 $10^18+3$ 取模为 $k$ .
> 要求构造的有向图点数不超过100,边数不超过 $3\times 10^5$

首先众所周知的一个DAG的生成树个数是所有节点的入度的乘积.那么要控制入度,考虑直接让1到每个节点连一堆边就控制了入度,所以现在问题是要选若干个数乘积在膜意义下等于 $k$ .

这个东西我们不会做,可以智慧.假设要等于一个数,那么给2号点随机一个入度,就直接给 $k$ 乘上一个逆元,这很好因为你发现这样做把出题人精心构造的 $k$ 变成了近乎随机的.那么现在你手里由一个随机的 $k$ ,于是接着随机每个节点的入度,判断此时乘上一堆逆元之后的 $k$ 是否可以由小于某个阈值的质数表示,如果随到最后还没弄出来就从头再来.

复杂度算不出来,但qyc说他写出来之后只跑了1s多一点.考虑剪枝,考虑判断一个数是不是可以分解为小于某个数的质数这件事比较费时,所以仅在它膜常数 $C$ 为0的时候去判断.这样做相当于把值域缩小到 $\dfrac{1}{C}$ ,就能跑了.

qyc说比较好的参数是 $5\times 10^4$ , $C=360$ 